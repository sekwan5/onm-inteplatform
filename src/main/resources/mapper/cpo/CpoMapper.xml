<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sk.signet.onm.mapper.cpo.CpoMapper">


	<sql id="selectCpoListfrom">
		FROM ONM.CMN_M_CPO
		<trim prefix="WHERE" prefixOverrides="AND">
			<if test="custComStat != null">
				CUST_COM_STAT IN
				<foreach collection="custComStat" item="item" open="(" close=")" separator=",">
			 #{item}
		 </foreach>
			</if>
			<if test="custComNm != null and custComNm !=''">
        		AND CUST_COM_NM = #{custComNm}
    		</if>
			<if test="custComId != null and custComId !=''">
        		AND CUST_COM_ID = #{custComId}
    		</if>
			<if test="mgrNm != null and mgrNm !=''">
        		AND MGR_NM = #{mgrNm}
    		</if>
		</trim>
	</sql>

	<!-- CPO 리스트 조회(그리드) -->
	<select id="selectCpoList" parameterType="map" resultType="com.sk.signet.onm.common.db.ResultMap">
		SELECT 
			  CPO_ID
			, CUST_COM_ID
			, CUST_COM_NM
			, BIZ_NUM
			, SECT_CD
			, ENT_CD
			, HD_ZIPCD
			, HD_ADDR
			, HD_ADDR_DTL
			, CUST_COM_STAT
			, MGR_NM
			, DEPT_NM
			, DEPT_RANK
			, TEL_NUM
			, HP_NUM
			, EMAIL
			, ZIPCD
			, ADDR
			, ADDR_DTL
			, SIGNET_MGR_NM
			, SIGNET_DEPT_NM
			, SIGNET_DEPT_RANK
			, SIGNET_TEL_NUM
			, SIGNET_HP_NUM
			, SIGNET_EMAIL
			, DBOARD_TPE_TP
			, CONT
			, REG_ID
			, REG_DT
			, MOD_ID
			, MOD_DT
		<include refid="selectCpoListfrom" />
	</select>

	<!-- 그리드 row 갯수 -->
	<select id="selectCpoListCount" parameterType="map" resultType="int">
		SELECT COUNT(*) AS CNT
		<include refid="selectCpoListfrom" />
	</select>


	<!-- 플랫폼 고객사(CPO) 등록 -->
	<insert id="insertCpo" parameterType="map">
	INSERT INTO ONM.CMN_M_CPO
	(
		  CPO_ID
		, CUST_COM_NM
		, CUST_COM_ID
		, BIZ_NUM
		, SECT_CD
		, ENT_CD
		, HD_ZIPCD
		, HD_ADDR
		, HD_ADDR_DTL
		, CUST_COM_STAT
		, MGR_NM
		, DEPT_NM
		, DEPT_RANK
		, TEL_NUM
		, HP_NUM
		, EMAIL
		, ZIPCD
		, ADDR
		, ADDR_DTL
		, SIGNET_MGR_NM
		, SIGNET_DEPT_NM
		, SIGNET_DEPT_RANK
		, SIGNET_TEL_NUM
		, SIGNET_HP_NUM
		, SIGNET_EMAIL
		, DBOARD_TPE_TP
		, CONT
		, REG_ID
		, REG_DT
		, MOD_ID
		, MOD_DT
	)
VALUES
	(
	  ONM.FN_GET_DOMAIN_SEQ('CPO00')
	, #{custComNm}
	, #{custComId}
	, #{bizNum}
	, #{sectCd}
	, #{entCd}
	, #{hdZipcd}
	, #{hdAddr}
	, #{hdAddrDtl}
	, 0
	, #{mgrNm}
	, #{deptNm}
	, #{deptRank}
	, #{telNum}
	, #{hpNum}
	, #{email}
	, #{Zipcd}
	, #{Addr}
	, #{AddrDtl}
	, #{signetMgrNm}
	, #{signetDeptNm}
	, #{signetDeptRank}
	, #{signetTelNum}
	, #{signetHpNum}
	, #{signetEmail}
	, 0
	, #{cont}
	, #{regId}
	, now()
	, #{regId}
	, now()
	)
	</insert>

	<!-- 개인정보 마스킹제거 요청 -->
	<select id="removeMasking" parameterType="Map" resultType="com.sk.signet.onm.common.db.ResultMap"></select>

	<insert id="insertLoginHist" parameterType="com.sk.signet.onm.common.db.ResultMap"></insert>


</mapper>